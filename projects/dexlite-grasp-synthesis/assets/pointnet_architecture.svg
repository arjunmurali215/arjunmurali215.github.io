<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
    <marker id="arrow-white" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
    </marker>
    
    <linearGradient id="green-grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="600" fill="#F9FAFB"/>
  
  <!-- Title -->
  <text x="500" y="40" font-family="Inter, system-ui, sans-serif" font-size="24" font-weight="700" text-anchor="middle" fill="#111827">PointNet Feature Extractor Architecture</text>
  <text x="500" y="65" font-family="Inter, system-ui, sans-serif" font-size="13" text-anchor="middle" fill="#6B7280">Extracts global and local geometric features from object point clouds</text>
  
  <!-- Main architecture container -->
  <rect x="50" y="95" width="900" height="380" rx="12" fill="white" stroke="#E5E7EB" stroke-width="1.5" filter="url(#shadow)"/>
  
  <!-- Input -->
  <g transform="translate(80, 140)">
    <rect x="0" y="0" width="100" height="80" rx="8" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2"/>
    <text x="50" y="30" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle" fill="#1E40AF">Input</text>
    <text x="50" y="50" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#3B82F6">Point Cloud</text>
    <text x="50" y="68" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#60A5FA">B × 3 × N</text>
  </g>
  
  <!-- Arrow -->
  <line x1="185" y1="180" x2="220" y2="180" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Conv1 -->
  <g transform="translate(230, 120)">
    <rect x="0" y="0" width="120" height="120" rx="8" fill="url(#green-grad)" filter="url(#shadow)"/>
    <text x="60" y="25" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="700" text-anchor="middle" fill="white">Conv1D Block 1</text>
    <line x1="10" y1="35" x2="110" y2="35" stroke="rgba(255,255,255,0.3)"/>
    <text x="60" y="55" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Conv1D</text>
    <text x="60" y="70" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">3 → 64</text>
    <text x="60" y="90" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">BatchNorm</text>
    <text x="60" y="108" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#FCD34D">ReLU</text>
  </g>
  
  <!-- Arrow -->
  <line x1="355" y1="180" x2="390" y2="180" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Conv2 -->
  <g transform="translate(400, 120)">
    <rect x="0" y="0" width="120" height="120" rx="8" fill="url(#green-grad)" filter="url(#shadow)"/>
    <text x="60" y="25" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="700" text-anchor="middle" fill="white">Conv1D Block 2</text>
    <line x1="10" y1="35" x2="110" y2="35" stroke="rgba(255,255,255,0.3)"/>
    <text x="60" y="55" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Conv1D</text>
    <text x="60" y="70" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">64 → 128</text>
    <text x="60" y="90" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">BatchNorm</text>
    <text x="60" y="108" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#FCD34D">ReLU</text>
  </g>
  
  <!-- Arrow -->
  <line x1="525" y1="180" x2="560" y2="180" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Conv3 -->
  <g transform="translate(570, 120)">
    <rect x="0" y="0" width="120" height="120" rx="8" fill="url(#green-grad)" filter="url(#shadow)"/>
    <text x="60" y="25" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="700" text-anchor="middle" fill="white">Conv1D Block 3</text>
    <line x1="10" y1="35" x2="110" y2="35" stroke="rgba(255,255,255,0.3)"/>
    <text x="60" y="55" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Conv1D</text>
    <text x="60" y="70" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">128 → 1024</text>
    <text x="60" y="90" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">BatchNorm</text>
    <text x="60" y="108" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#FCD34D">ReLU</text>
  </g>
  
  <!-- Arrow -->
  <line x1="695" y1="180" x2="730" y2="180" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Conv4 -->
  <g transform="translate(740, 130)">
    <rect x="0" y="0" width="100" height="100" rx="8" fill="url(#green-grad)" filter="url(#shadow)"/>
    <text x="50" y="22" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="700" text-anchor="middle" fill="white">Conv1D</text>
    <text x="50" y="38" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="700" text-anchor="middle" fill="white">Block 4</text>
    <line x1="10" y1="48" x2="90" y2="48" stroke="rgba(255,255,255,0.3)"/>
    <text x="50" y="65" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Conv1D</text>
    <text x="50" y="80" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">1024 → 256</text>
    <text x="50" y="93" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">BatchNorm</text>
  </g>
  
  <!-- Feature tensor label -->
  <g transform="translate(740, 250)">
    <text x="50" y="15" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#6B7280">Features:</text>
    <text x="50" y="30" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#374151">B × 256 × N</text>
  </g>
  
  <!-- Branch point -->
  <line x1="790" y1="235" x2="790" y2="290" stroke="#374151" stroke-width="2"/>
  
  <!-- Left branch (Global) -->
  <line x1="790" y1="290" x2="550" y2="290" stroke="#374151" stroke-width="2"/>
  <line x1="550" y1="290" x2="550" y2="320" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Max Pool -->
  <g transform="translate(470, 330)">
    <rect x="0" y="0" width="160" height="60" rx="8" fill="#F59E0B" filter="url(#shadow)"/>
    <text x="80" y="25" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" text-anchor="middle" fill="white">Max Pooling</text>
    <text x="80" y="45" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">over N points</text>
  </g>
  
  <!-- Arrow to global output -->
  <line x1="550" y1="395" x2="550" y2="420" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Global Feature Output -->
  <g transform="translate(470, 430)">
    <rect x="0" y="0" width="160" height="50" rx="8" fill="#8B5CF6" filter="url(#shadow)"/>
    <text x="80" y="22" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" text-anchor="middle" fill="white">Global Feature</text>
    <text x="80" y="40" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">f_global ∈ ℝ²⁵⁶</text>
  </g>
  
  <!-- Right branch (Local) -->
  <line x1="790" y1="290" x2="860" y2="290" stroke="#374151" stroke-width="2"/>
  <line x1="860" y1="290" x2="860" y2="320" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Index Selection -->
  <g transform="translate(780, 330)">
    <rect x="0" y="0" width="160" height="60" rx="8" fill="#EC4899" filter="url(#shadow)"/>
    <text x="80" y="25" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" text-anchor="middle" fill="white">Index Selection</text>
    <text x="80" y="45" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">at associated point j</text>
  </g>
  
  <!-- Arrow to local output -->
  <line x1="860" y1="395" x2="860" y2="420" stroke="#374151" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Local Feature Output -->
  <g transform="translate(780, 430)">
    <rect x="0" y="0" width="160" height="50" rx="8" fill="#8B5CF6" filter="url(#shadow)"/>
    <text x="80" y="22" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" text-anchor="middle" fill="white">Local Feature</text>
    <text x="80" y="40" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">f_local ∈ ℝ²⁵⁶</text>
  </g>
  
  <!-- Concatenation info -->
  <g transform="translate(590, 500)">
    <rect x="0" y="0" width="240" height="45" rx="8" fill="#F3F4F6" stroke="#D1D5DB"/>
    <text x="120" y="20" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#374151">Condition Vector = [f_global; f_local]</text>
    <text x="120" y="36" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#6B7280">c ∈ ℝ⁵¹² → Input to CVAE</text>
  </g>
  
  <!-- Arrows pointing to concat -->
  <line x1="550" y1="485" x2="660" y2="505" stroke="#374151" stroke-width="1.5"/>
  <line x1="860" y1="485" x2="760" y2="505" stroke="#374151" stroke-width="1.5"/>
  
  <!-- Key properties box -->
  <g transform="translate(80, 295)">
    <rect x="0" y="0" width="280" height="160" rx="8" fill="#EFF6FF" stroke="#3B82F6" stroke-width="1"/>
    <text x="140" y="25" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" text-anchor="middle" fill="#1E40AF">Key Properties</text>
    <line x1="15" y1="38" x2="265" y2="38" stroke="#3B82F6" stroke-opacity="0.3"/>
    
    <text x="20" y="60" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#1E40AF">✓ Permutation Invariant</text>
    <text x="30" y="75" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#3B82F6">  Max pooling ignores point order</text>
    
    <text x="20" y="95" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#1E40AF">✓ Point-wise Features</text>
    <text x="30" y="110" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#3B82F6">  1D convs process each point</text>
    
    <text x="20" y="130" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#1E40AF">✓ Dual Output</text>
    <text x="30" y="145" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#3B82F6">  Global shape + Local geometry</text>
  </g>
  
  <!-- Footer -->
  <text x="500" y="580" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#9CA3AF">Based on PointNet (Qi et al., CVPR 2017) adapted for grasp synthesis</text>
</svg>
